<!DOCTYPE html>
<html>
<head>
	<title>Laboratorio 1 - RIA 2015</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="../css/jquery.modal.css" type="text/css" rel="stylesheet" />
	<link href="../css/jquery.modal.theme-xenon.css" type="text/css" rel="stylesheet" />
	<link href="../css/jquery.modal.theme-atlant.css" type="text/css" rel="stylesheet" />
	<!--jQuery-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script type="text/javascript" src="../js/jquery.modal.js"></script>    
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/estilo.css">
    <!-- Shared assets -->
    <link rel="stylesheet" type="text/css" href="../css/carouselStyle.css">

    <!-- Example assets -->
    <link rel="stylesheet" type="text/css" href="../css/jcarousel.transitions.css">
    <script type="text/javascript" src="../js/jquery.jcarousel.min.js"></script>
    <script type="text/javascript" src="../js/modernizr.js"></script>
    <script type="text/javascript" src="../js/jcarousel.transitions.js"></script>
    <script type="text/javascript" src="../js/data.js"></script>    
</head>
<body>

	<nav class="navbar navbar-inverse">
	  	<div class="container-fluid">
	    	<div class="navbar-header">
	      		<img class="imagen" src="../images/logotipoMin.png" alt="DRIMTIM">
	    	</div>
	    	<div>
		      	<ul class="nav navbar-nav">
		        	<li class="active"><a href="../index.html">Home</a></li>
		        	<!--<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Page 1 <span class="caret">
		        	<span>
		        	</a>
		          		<ul class="dropdown-menu">
		            		<li><a href="#">Page 1-1</a></li>
		            		<li><a href="#">Page 1-2</a></li>
		            		<li><a href="#">Page 1-3</a></li>
		          		</ul>
		        	</li>-->
		        	<li><a href="#">Ver Imagenes</a></li>
		        	<li><a href="#">DRIMTIM</a></li>
		      	</ul>
		      	<ul class="nav navbar-nav navbar-right">
		        	<li><a href="../index.html"><span id="nombreUsu" class="glyphicon glyphicon-user">&nbsp;</span>
		        	</a></li>
		        	<li><a href="../index.html"><span class="glyphicon glyphicon-log-in"></span>&nbsp;&nbsp;Salir</a></li>
		      	</ul>
		    </div>
	  	</div>
	</nav>

	<header class="page-header">
		<h1>
			Laboratorio 1 - RIA 2015
		</h1>
	</header>

	<section class="main">
		<ul class="nav nav-tabs">
			<li id="linkIngresar" role="presentation"><a
				onclick="mostrarFuncionalidad('INGRESAR');">Ingresar</a></li>
			<li id="linkVer" role="presentation"><a
				onclick="mostrarFuncionalidad('VER');">Ver</a></li>
		</ul>
		<div id="formIngresar">
			
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h3 class="panel-title">Ingresar Imágen</h3>
				</div>
				<form id="formSubirImg">
				<div class="panel-body ingreso">
					<div class="img-thumbnail imagenMostrar input-group">
						<img id="miniatura" src="" alt="Imágen" name="imagenUsuario">
					</div>
					<div class="imagenBuscar input-group">
						<input id="subirImg" type="file" class="btn btn-primary" value="Subir Imagen...">
					</div>
					<br />
					<div class="input-group">
						<span class="input-group-addon" id="basic-addon1">Titulo: </span>
						<input type="text" class="form-control"
							placeholder="Ingrese el título de la imágen..."
							aria-describedby="basic-addon1" name="tituloImagen">
					</div>
					<br />
					<div class="input-group">
						<span class="input-group-addon" id="basic-addon1">Descripción:
						</span>
						<textarea class="form-control"
							placeholder="Ingrese una descripción de la imágen..."
							aria-describedby="basic-addon1" name="descImagen"></textarea>
					</div>
				</div>
				</form>	
				<div class="panel-footer">
					<button id="btnSubirImg" type="submit" class="btn btn-primary">
					<span class="glyphicon glyphicon-picture"></span>&nbsp;&nbsp;Agregar Imágen</button>
				</div>
			</div>
			
		</div>

		<div id="formVer">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h3 class="panel-title">Ver Imágenes</h3>
				</div>

				<div class="text-info">
					<h4 id="titulo">Titulo...</h4>
				</div>				

		        <div class="wrapper">

		            <div class="jcarousel-wrapper">
		                <div class="jcarousel">
		                    <ul>
		                        <li style="background: url('../images/paisajes/01.jpg');"></li>
		                        <li style="background: url('../images/paisajes/02.jpg');"></li>
		                        <li style="background: url('../images/paisajes/03.jpg');"></li>
		                        <li style="background: url('../images/paisajes/04.jpg');"></li>
		                        <li style="background: url('../images/paisajes/05.jpg');"></li>
		                    </ul>
		                </div>

		                <p class="photo-credits">
		                    Photos by <a href="http://www.mw-fotografie.de">Marc Wiegelmann</a>
		                </p>

		                <a href="#" id="prev" class="jcarousel-control-prev">&lsaquo;</a>
		                <a href="#" id="next" class="jcarousel-control-next">&rsaquo;</a>
		            </div>

		        </div>		

		        <div class="text-info">
					<BLOCKQUOTE id="desc" >Descripcion...</BLOCKQUOTE>
				</div>

			</div>
		</div>		

	</section>

	<footer class="footer">
		<div class="navbar navbar-inverse" role="navigation">
			<div class="glyphicon">
				<strong>Laboratorio 1 - RIA - 2015</strong>
			</div><br>
			<span><span class="glyphicon glyphicon-envelope"><strong>&nbsp;drimtim@gmail.com</strong></span>&nbsp;
			<img class="imagen" src="../images/logotipoMin.png" alt="DRIMTIM!">
           	<span><span class="glyphicon glyphicon-globe"><strong>&nbsp;www.drimtim.com</strong></span>&nbsp;			
		</div>
	</footer>	

	<script type="text/javascript">

 		/* Copyright (c) 2006 Mathias Bank (http://www.mathias-bank.de)
 		* Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) 
 		* and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 		* 
 		* Thanks to Hinnerk Ruemenapf - http://hinnerk.ruemenapf.de/ for bug reporting and fixing.
 		*/
		jQuery.extend({
		/**
		* Returns get parameters.
		*
		* If the desired param does not exist, null will be returned
		*
		* @example value = $.getURLParam("paramName");
		*/ 
 			getURLParam: function(strParamName){
				var strReturn = "";
				var strHref = window.location.href;
				var bFound=false;
				  
				var cmpstring = strParamName + "=";
				var cmplen = cmpstring.length;

				if ( strHref.indexOf("?") > -1 ){
				  	var strQueryString = strHref.substr(strHref.indexOf("?")+1);
				    var aQueryString = strQueryString.split("&");
				    for ( var iParam = 0; iParam < aQueryString.length; iParam++ ){
				      	if (aQueryString[iParam].substr(0,cmplen)==cmpstring){
				        	var aParam = aQueryString[iParam].split("=");
				        	strReturn = aParam[1];
				        	bFound=true;
				        	break;
				      	}
				      
				    }
				}
				if (bFound==false) return null;
					return strReturn;
				}
			});

		$('#titulo').html(img_json[0]['imagenes'][0].titulo);				
		$('#desc').html(img_json[0]['imagenes'][0].desc);		

		var nombreUsuario = $.getURLParam("nombreUsu");
		if(nombreUsuario != null && nombreUsuario != ""){ 
			var aux = '&nbsp;' + nombreUsuario.replace(/\+/g, " ");
			$("#nombreUsu").html(aux);
		}else{
			$("#nombreUsu").html(" Registrese!");	
		}

		$("#formVer").hide();

		function mostrarImagen(input) {
 			if (input.files && input.files[0]) {
  				var reader = new FileReader();
  				reader.onload = function (e) {
   					$('#miniatura').attr('src', e.target.result);
  				}
  				reader.readAsDataURL(input.files[0]);
 			}
		}

		function mostrarFuncionalidad(funcionalidad) {
			if (funcionalidad == "INGRESAR") {
				$("#formIngresar").show();
				$("#formVer").hide();
				$("#linkIngresar").attr("class", "active");
				$("#linkVer").attr("class", "");
			} else {
				$("#formIngresar").hide();
				$("#formVer").show();
				$("#linkIngresar").attr("class", "");
				$("#linkVer").attr("class", "active");
			}

		}
 
		$("#subirImg").change(function(){
 			mostrarImagen(this);
		});

		$("#btnSubirImg").click(function(){
			modal({
				type: 'confirm',
				title: 'Confirmacion de subida',
				text: 'Esta seguro que desea subir esta imagen?',
				callback: function(result) {
					if(result){

						var url = "gestionImagenes.html"; // El script a dónde se realizará la petición.
		    			$.ajax({
		           			type: "POST",
		           			url: url,
		           			data: $("#formSubirImg").serialize(), // Adjuntar los campos del formulario enviado.
		           			success: function(data){
		               			$("#respuesta").html(data);
		           			}
		         		});
		 
		    			return true; // Evitar ejecutar el submit del formulario.
		 			}
				}
			});
 		});	

 		function aleatorio(inferior,superior){
    		var numPosibilidades = superior - inferior;
    		var aleat = Math.random() * numPosibilidades;
    		aleat = Math.round(aleat);
    		return parseInt(inferior) + aleat;
		}; 

		$("#next").click(function(){

			var i = aleatorio(0, 4);

			$('#titulo').html(img_json[0]['imagenes'][i].titulo);				
			$('#desc').html(img_json[0]['imagenes'][i].desc);
			
 			
		});


	</script>

</body>
</html>